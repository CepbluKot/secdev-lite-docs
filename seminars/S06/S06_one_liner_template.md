# S06 - One-liner (template)

> Цель: оформить **одну** команду (DV1), повторяемую на чистой машине и выдающую артефакт отчёта тестов.

## Паспорт one-liner (заполнить)

* ОС/шелл: **ТУТ НУЖНА ТВОЯ ВСТАВКА** (например, Ubuntu 22.04 / bash, Windows 11 / PowerShell 5.1+)
* Версия Python: **ТУТ НУЖНА ТВОЯ ВСТАВКА** (≥3.11)
* Команда (one-liner) для локального запуска:

  ```text
  ТУТ НУЖНА ТВОЯ ВСТАВКА
  ```

* Что создаёт: `EVIDENCE/S06/test-report.xml` (+ по желанию логи в `EVIDENCE/S06/logs/`)
* Ожидаемый код выхода: **0** при успехе (не 0 - провал)

---

## Правила one-liner

* **Одна команда** (может вызывать скрипт/Makefile), **без ручного ввода**.
* **Детерминизм:** зависимости зафиксированы (`requirements.txt`/lock-файл).
* **Артефакты:** отчет тестов обязательно в `EVIDENCE/S06/test-report.xml`.
* **Чистая среда:** команда сама создаёт/активирует окружение **или** явно описывает предпосылки.

---

## Готовые варианты (выберите один и адаптируйте)

### Вариант A - Bash (Linux/macOS)

```bash
python -m venv .venv && . .venv/bin/activate && pip install -r requirements.txt && python scripts/init_db.py && pytest -q --junitxml=EVIDENCE/S06/test-report.xml
```

### Вариант B - PowerShell (Windows)

```bash
python -m venv .venv; .\.venv\Scripts\Activate.ps1; pip install -r requirements.txt; python scripts/init_db.py; pytest -q --junitxml=EVIDENCE/S06/test-report.xml
```

### Вариант C - Через Make (если добавили цель)

> (создайте цель `ci-s06` в `Makefile`, которая пишет отчёт в `EVIDENCE/S06/`)

```bash
make ci-s06
```

> **Важно:** в S06 **не** используйте Docker-образ в качестве one-liner - контейнеризация будет на S07. Здесь проверяем именно локальную воспроизводимость.

---

## Мини-чек перед сдачей

* [ ] Команда выполняется **целиком** и **без вопросов к пользователю**.
* [ ] Повторный запуск даёт тот же результат (детерминизм).
* [ ] Файл `EVIDENCE/S06/test-report.xml` появился и не пустой.
* [ ] Все нужные каталоги (`EVIDENCE/S06/…`) создаются автоматически.
* [ ] В репозитории нет секретов (`.env` не коммитится; есть `.env.example`).

---

## Как сослаться в `GRADING/DV.md`

* **DV1:** вставьте точную команду one-liner и укажите ОС/шелл/версию Python.
* **DV4:** добавьте путь к отчёту: `EVIDENCE/S06/test-report.xml`.
* **DV5:** в `README` (2-5 строк) опишите «Локальный запуск» и отсылку к one-liner.

---

## Частые ошибки

* Запрос интерактива (ввод пароля, пауза) - **нельзя**.
* Отсутствует отчёт в `EVIDENCE/S06/` - **минус DV1/DV4**.
* Плавающие версии пакетов → нестабильные результаты.
* Команда «спрятана» в IDE-конфигурации - нужно CLI.
